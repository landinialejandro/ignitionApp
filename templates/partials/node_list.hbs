{{!-- partials/node_list.hbs --}}
<li class="node-item expanded{{#if state.expanded}} expanded{{/if}}{{ li_class}}"
    {{#each li_attr}} {{@key}}="{{this}}" {{/each}}>
    <div class="node-link-container"
        id="{{id}}"
        data-name="{{caption}}"
        data-type="{{type}}"
        data-id="{{id}}"
    >
        <a class="node-link {{#if active}}active{{/if}} {{a_class}}"
            {{#each a_attr}} {{@key}}="{{this}}" {{/each}}>
            {{> component_i context="nav"}}
            {{#if caption}}
            <span class="node-text" title="{{caption}}">{{caption}}</span>
            {{/if}}
            {{#if badge}}
            <span class="nav-badge badge text-bg-{{badge.color}} me-3">
                <i class="{{badge.icon}}"> </i>{{badge.text}}
            </span>
            {{/if}}
        </a>
        <div id="{{id}}" class="tools-box">
            <button class="button-tool button-options-node" aria-label="Context MenÃº">
                <i class="bi bi-three-dots"></i>
            </button>
            {{#when type 'noteq' 'field'}}
            <button class="button-tool button-add-child-node" aria-label="Agregar nodo hijo">
                <i class="bi bi-plus-circle node-add"></i>
            </button>
            {{/when}}
            <button  class="button-tool button-delete-node" aria-label="Eliminar nodo">
                <i class="bi bi-trash node-delete"></i>
            </button>
            {{#if children}}
            {{> button_collapse expanded=true}}
            {{/if}}
        </div>
    </div>

    {{#if children}}
    <ul class="node-list node-submenu">
        {{#each children}}
        {{> node_list }}
        {{/each}}
    </ul>
    {{/if}}
</li>
